# Generate Collision Data and Prepare for Heat-map Plot

## Getting Started

Using scripts in this directory, one can generate robot collision data and get necessary datalog for the heat-map plot.

## Running the codes

### Running forwardKinematics_VREP.ipynb

This program will:
* Open V-REP scene *robot_with_bore.ttt* and run this script.
* Save collision data to *logs/CollisionData.npy*

Some parameters to tune in this file:
```
config = configGenerator_VREP.generate_sample(5)  # !!!set sample number here
```
Tune the number of configuration to generate desired size of dataset.

### Running collisionPlot.ipynb

This program will:
* Load collision data *logs/CollisionData.npy*
* Apply insertion DOF to C-free data and save to 

    *logs/EEPosition_new.npy*,  *logs/EEOrientation_new.npy*,   *logs/EEQuaternion_new.npy*

### Running collisionPlot_torso.ipynb

This program will:
* load data generated by *collisionPlot.ipynb*
* load torso vertices *../STLRead/Torso_vertices.mat*
* Use KDtree to retract vertices near torso surface
* Analyze orientation dexterity near each vertice
* Build color map data and save as *logs/num_bin.csv*

Some parameters to tune in this file:
```
binCounts, spherical, temp, thetaInterval, phiInterval = quantizeOrientationsBins(8, hash_quaternion_torso[i])  # !!!set number of bins
```
Tune this number to set bin numbers in orientation dexterity analysis

### After running these scripts, please refer to *../STLRead* for further instruction

## Authors

* **Mingwei Xu** - *UCSD ECE*
* **Dimitri Schreiber** - *UCSD ECE*


